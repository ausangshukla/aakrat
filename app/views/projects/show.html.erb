<%= render "/layouts/alerts" %>

  <table class="table table-bordered dataTable">

    <tr>
      <td>
        Client
      </td>
      <td>
        <%= @project.client.full_name %>
      </td>
    </tr>

    <tr>
      <td>
        Project Name
      </td>
      <td>
        <%= @project.name %>
      </td>
    </tr>
    <tr>
      <td>
        Start Date
      </td>
      <td>
        <%= l @project.start_date %>
      </td>
    </tr>
    <tr>
      <td>
        End Date
      </td>
      <td>
        <%= l @project.end_date %>
      </td>
    </tr>

    <tr>
      <td>
        Project Type
      </td>
      <td>
        <%= @project.project_type %>
      </td>
    </tr>
    <tr>
      <td>
        Scale
      </td>
      <td>
        <%= @project.scale %>
      </td>
    </tr>
    <tr>
      <td>
        Style
      </td>
      <td>
        <%= @project.style %>
      </td>
    </tr>
    <tr>
      <td>
        Pattern
      </td>
      <td>
        <%= @project.pattern %>
      </td>
    </tr>
    <tr>
      <td>
        Services
      </td>
      <td>
        <%= @project.services.join(", ") if @project.services %>
      </td>
    </tr>

    <tr>
      <td>
        Client Budget Estimate
      </td>
      <td>
        <%= money_to_currency @project.client_estimated_budget, params %>
      </td>
    </tr>

    <tr>
      <td>
        Actual Cost
      </td>
      <td>
        <%= money_to_currency @project.actual_cost, params %>
      </td>
    </tr>

    <tr>
      <td>
        Estimated BuiltUp Area
      </td>
      <td>
        <%= custom_format_number @project.estimated_builtup_area, params %>
      </td>
    </tr>

    <tr>
      <td>
        Actual BuiltUp Area
      </td>
      <td>
        <%= custom_format_number @project.actual_builtup_area, params %>
      </td>
    </tr>

    <tr>
      <td>
        Fees Type
      </td>
      <td>
        <%=  @project.fee_type %> 
      </td>
    </tr>

    <% if  @project.fee_type == "% of Budget" %>
    <tr>
      <td>
        Fees as % of Budget
      </td>
      <td>
        <%=  @project.percentage_of_estimated_budget %> %
      </td>
    </tr>
    <% elsif  @project.fee_type == "Rate / SqFt" %>
    <tr>
      <td>
        Fees as Rate per SqFt
      </td>
      <td>
        <%=  money_to_currency @project.per_sq_ft_rate, params %>
      </td>
    </tr>
    <% end %>
    
    <tr>
      <td>
        Fees
      </td>
      <td>
        <%= money_to_currency @project.fees, params %>
      </td>
    </tr>

    


    <tr>
      <td>
        Payment Amount
      </td>
      <td>
        <%= money_to_currency @project.payment_amount, params %>
      </td>
    </tr>


    <tr>
      <td>
        Percentage Completed
      </td>
      <td>
        <%= number_with_precision @project.percentage_completed_days, precision: 2 %> %
      </td>
    </tr>
    <tr>
      <td>
        Status
      </td>
      <td>
        <%= @project.status %>
      </td>
    </tr>
    
    <tr>
      <td>
        Days
      </td>
      <td>
        Total: <%= @project.total_days %>, 
        Completed: <%= @project.completed_days %>
      </td>    
    </tr>

    <tr>
      <td>
        Details
      </td>
      <td>
        <%= @project.details %>
      </td>    
    </tr>

    <tr>
      <td>
        Company
      </td>
      <td>
        <%= @project.company.name %>
      </td>
    </tr>


  </table>

  <% if policy(@project).update? %>
  <div>
    <%= link_to "Edit" , edit_project_path(@project), {class: "btn btn-primary" } %> |
    <% if @project.cloned_from.present? && @project.phases.count == 0 %>
      <%= button_to "Clone Phases" , clone_phases_project_path(@project), {class: "btn btn-success", method: :patch } %> |
    <% else %>
      <%= button_to "Clone Project" , clone_project_path(@project), {class: "btn btn-success", method: :post } %> |
    <% end %>
    <%= button_to "Delete" , @project, method: :delete, class: "btn btn-danger" , form_class: "deleteButton" %>
  </div>
  <% end %>

  <div data-controller="datatable">
    <%= render "/projects/project_details", project: @project %>
  </div>