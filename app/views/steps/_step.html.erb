<tr id="<%= dom_id step %>">
  <td>
    <%= step.name %>
  </td>
  <td>
    <%= l step.start_date %>
  </td>
  <td>
    <%= l step.end_date %>
  </td>
  <td>
    <%= (step.end_date - step.start_date).to_i %>
  </td>
  
  <td>
    <%= step.status %>
    <span class="badge <%= step.delayed? ? 'bg-danger' : 'bg-success' %>">
      <%= step.on_time_status %>
    </span>  
  </td>
  <td>
    <%= step.assigned_to.full_name %>
  </td>
  <td>
    <span class="badge <%= step.visible_to_client ? 'bg-success' : 'bg-warning' %>">
      <%= step.visible_to_client ? "Yes" : "No" %>
    </span>  
  </td>
  <td>
    <span class="badge <%= step.completed ? 'bg-success' : 'bg-warning' %>">
      <%= step.completed ? "Yes" : "No" %>
    </span>  
  </td>
  <td>
    <%= link_to "Show" , step , {class: "btn btn-primary" }%>
    <% label = step.completed ? "Incomplete" : "Completed" %>
    <%= button_to label , toggle_completed_step_path(step) , {class: "btn btn-success", method: :patch }%>
    <%= link_to "Add Note" , new_note_path("note[owner_id]": step.id, "note[owner_type]": step.class.name) , {class: "btn btn-success" }%>
  </td>
</tr>