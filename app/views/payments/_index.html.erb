<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Payments</h1>

    <% if @project && (policy(@project).update? || policy(@project).permissions&.write_payment?) %>
        <%= link_to "New Payment", new_payment_path("payment[project_id]": @project.id), 
                    class: "btn btn-primary" %>
    <% end %>

    <% if @phase && (policy(@phase.project).update? || policy(@phase.project).permissions&.write_payment?) %>
        <%= link_to "New Payment" , new_payment_path("payment[phase_id]": @phase.id, 
                    "payment[project_id]": @phase.project_id) , {class: "btn btn-primary" } %>
    <% end %> 

</div>

<div class="table-responsive">

    <table id="payments" class="table table-bordered dataTable jqDataTable">

        <thead>
            <tr>
                <th>
                    Client
                </th>
                <th>
                    Amount
                </th>
                <th>
                    Status
                </th>
                <th>
                    Due Date
                </th>
                <th>
                    Received On
                </th>
                <th>
                    Project
                </th>
                <th>
                    Phase
                </th>
                <th>
                    Discount
                </th>
                <th>
                    Reference Number
                </th>
                <th>
                    User
                </th>

                <th>
                    Action
                </th>
            </tr>
        </thead>

        <tbody>
            <% payments.each do |payment| %>
                <%= render payment %>
            <% end %>
        </tbody>
    </table>

</div>